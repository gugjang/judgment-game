<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>íŒë‹¨ì˜ ì‹ </title>
<style>
body{
 margin:0;
 font-family:Pretendard,Arial,sans-serif;
 background:linear-gradient(135deg,#fdfbfb,#ebedee);
 display:flex;
 justify-content:center;
 align-items:center;
 height:100vh;
}
.container{
 width:100%;
 max-width:420px;
 padding:20px;
 text-align:center;
}
h1{font-size:2.3rem}
.rule{font-size:1.15rem;font-weight:600;margin:10px 0}
.numbers{display:flex;justify-content:center;gap:10px;margin:20px 0}
.num-btn{
 font-size:1.5rem;
 padding:16px 18px;
 border:none;
 border-radius:12px;
 background:#fff;
 box-shadow:0 4px 10px rgba(0,0,0,.1);
 cursor:pointer;
}
.timer-bar{
 height:8px;
 background:#ddd;
 border-radius:5px;
 overflow:hidden;
}
.timer-fill{
 height:100%;
 background:#ff5a5a;
 width:100%;
}
.example{font-size:.9rem;color:#555;margin-top:8px}
.btn{
 padding:14px 24px;
 font-size:1.2rem;
 border:none;
 border-radius:12px;
 background:#000;
 color:#fff;
 cursor:pointer;
}
.score{font-size:3rem;font-weight:800}
</style>
</head>
<body>

<div class="container" id="app"></div>

<script>
let score=0,timer;
const TIME=3000;

/* ğŸ”¹ ê·œì¹™ ì •ì˜ */
const easyRules=[
 {
  text:"ê°€ì¥ í° ìˆ«ìë¥¼ ê³ ë¥´ì‹œì˜¤",
  example:"ì˜ˆ) 12 / 25 / 18 â†’ 25",
  solve:n=>Math.max(...n)
 },
 {
  text:"ê°€ì¥ ì‘ì€ ìˆ«ìë¥¼ ê³ ë¥´ì‹œì˜¤",
  example:"ì˜ˆ) 12 / 25 / 18 â†’ 12",
  solve:n=>Math.min(...n)
 },
 {
  text:"ì¤‘ê°„ê°’ì„ ê³ ë¥´ì‹œì˜¤",
  example:"ì˜ˆ) 12 / 18 / 25 â†’ 18",
  solve:n=>n.sort((a,b)=>a-b)[1]
 }
];

const hardRules=[
 {
  text:"ë‹¤ë¥¸ ìˆ«ìë“¤ê³¼ ê°€ì¥ ì°¨ì´ê°€ í° ìˆ«ìë¥¼ ê³ ë¥´ì‹œì˜¤",
  example:"ì˜ˆ) 18 / 19 / 25 â†’ 25",
  solve:n=>n.reduce((a,b)=>dist(b,n)>dist(a,n)?b:a)
 },
 {
  text:"í˜¼ìë§Œ ìë¦¿ìˆ˜ê°€ ë‹¤ë¥¸ ìˆ«ìë¥¼ ê³ ë¥´ì‹œì˜¤",
  example:"ì˜ˆ) 21 / 34 / 105 â†’ 105",
  solve:n=>n.find(x=>n.filter(y=>String(y).length===String(x).length).length===1)
 },
 {
  text:"ìë¦¬ìˆ˜ì˜ ê³±ì´ ê°€ì¥ ì‘ì€ ìˆ«ìë¥¼ ê³ ë¥´ì‹œì˜¤",
  example:"ì˜ˆ) 23(6), 41(4), 35(15) â†’ 41",
  solve:n=>n.reduce((a,b)=>mul(b)<mul(a)?b:a)
 },
 {
  text:"ìˆ«ìë“¤ì˜ íŒ¨í„´ì„ ê¹¨ëŠ” ìˆ«ìë¥¼ ê³ ë¥´ì‹œì˜¤",
  example:"ì˜ˆ) 10 / 20 / 35 â†’ 35",
  solve:n=>n[n.length-1]
 },
 {
  text:"ë³´ê¸° ì¤‘ ê°€ì¥ ë‹¤ë¥¸ ìˆ«ìë¥¼ ê³ ë¥´ì‹œì˜¤",
  example:"ì˜ˆ) 12 / 14 / 16 / 31 â†’ 31",
  solve:n=>n[n.length-1],
  four:true
 }
];

function mul(n){return String(n).split("").reduce((a,b)=>a*b,1)}
function dist(x,a){return a.reduce((s,v)=>s+Math.abs(x-v),0)}

function start(){
 document.getElementById("app").innerHTML=`
 <h1>íŒë‹¨ì˜ ì‹ </h1>
 <p>ì²˜ìŒì—” ì‰½ìŠµë‹ˆë‹¤.<br>ê³§ ì•„ë‹ ê²ë‹ˆë‹¤.</p>
 <button class="btn" onclick="startGame()">ì‹œì‘í•˜ê¸°</button>`;
}

function startGame(){score=0;nextRound()}

function nextRound(){
 score++;
 let ruleset = score<10 ? easyRules : easyRules.concat(hardRules);
 let rule = ruleset[Math.floor(Math.random()*ruleset.length)];
 let count = rule.four ? 4 : 3;
 let nums=[];
 while(nums.length<count){
  let n=Math.floor(Math.random()*90)+10;
  if(!nums.includes(n)) nums.push(n);
 }
 let ans=rule.solve([...nums]);

 document.getElementById("app").innerHTML=`
 <div class="rule">ROUND ${score}</div>
 <div class="rule">${rule.text}</div>
 <div class="numbers">
 ${nums.map(n=>`<button class="num-btn" onclick="pick(${n},${ans})">${n}</button>`).join("")}
 </div>
 <div class="timer-bar"><div class="timer-fill" id="timer"></div></div>
 <div class="example">${rule.example}</div>`;

 let bar=document.getElementById("timer");
 bar.style.transition="width 3s linear";
 setTimeout(()=>bar.style.width="0%",10);
 timer=setTimeout(endGame,TIME);
}

function pick(n,a){
 clearTimeout(timer);
 n===a?nextRound():endGame();
}

function endGame(){
 clearTimeout(timer);
 let msg=score<6?"ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤":score<11?"íŒë‹¨ë ¥ì´ ë³´ì…ë‹ˆë‹¤":score<16?"ê½¤ í•˜ì‹œë„¤ìš”":"ë‹¹ì‹ ì€ íŒë‹¨ì˜ ì‹ ";
 document.getElementById("app").innerHTML=`
 <h1>ê²Œì„ ì¢…ë£Œ</h1>
 <div class="score">${score-1}ì </div>
 <p>${msg}</p>
 <button class="btn" onclick="start()">ì²˜ìŒìœ¼ë¡œ</button>`;
}

start();
</script>

</body>
</html>
