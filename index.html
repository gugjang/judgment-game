<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>íŒë‹¨ì˜ ì‹ </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  background:#111;
  color:#fff;
  font-family:Pretendard, Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.container{
  width:100%;
  max-width:420px;
  background:#1b1b1b;
  padding:24px;
  border-radius:16px;
}
h1,h2{text-align:center}
button{
  width:100%;
  padding:16px;
  margin-top:12px;
  border:none;
  border-radius:12px;
  font-size:18px;
  cursor:pointer;
  background:#2a2a2a;
  color:#fff;
}
button:hover{background:#333}
.hidden{display:none}
.char{
  font-size:64px;
  text-align:center;
  margin:16px 0;
}
</style>
</head>

<body>
<div class="container">

<div id="start">
  <h1>íŒë‹¨ì˜ ì‹ </h1>
  <button onclick="startSurvey()">ì‹œì‘í•˜ê¸°</button>
</div>

<div id="survey" class="hidden">
  <h2 id="q"></h2>
  <div id="a"></div>
</div>

<div id="result" class="hidden">
  <h2 id="typeName"></h2>
  <div class="char" id="char"></div>
  <p id="desc"></p>
  <button onclick="startGame()">ì´ ì„±í–¥ìœ¼ë¡œ ì‹œì‘</button>
</div>

<div id="game" class="hidden">
  <h2>ROUND <span id="round">1</span></h2>
  <div id="choices"></div>
</div>

<div id="end" class="hidden">
  <h2>ê²Œì„ ì¢…ë£Œ</h2>
  <p id="score"></p>
  <button onclick="location.reload()">ë‹¤ì‹œ ë„ì „</button>
</div>

</div>

<script>
/* ---------- SURVEY ---------- */
const survey=[
["ê²°ì •í•  ë•Œ?",["ë°”ë¡œ","ìƒê°","ë¯¸ë£¸"]],
["ì‹¤íŒ¨í•˜ë©´?",["ì¬ë„ì „","ë¶„ì„","í¬ê¸°"]],
["ì••ë°• ìƒí™©?",["ë¬´ì‹œ","ì¸ì§€","ë¶ˆì•ˆ"]],
["ì„ íƒ ê¸°ì¤€?",["ì§ê°","ë…¼ë¦¬","íšŒí”¼"]],
["ê²Œì„ ì„±í–¥?",["ì¦‰ì‹œ","íŒ¨í„´","ë§ì„¤ì„"]],
["íŒë‹¨ ì†ë„?",["ë¹ ë¦„","ë³´í†µ","ëŠë¦¼"]],
["ê²°ì •ì„?",["ë¯¿ìŒ","ê²€ì¦","í”¼í•¨"]]
];

let idx=0, score=[0,0,0];
let startTime;

/* ---------- START ---------- */
function startSurvey(){
  start.classList.add("hidden");
  surveyDiv.classList.remove("hidden");
  startTime=Date.now();
  showQ();
}

function showQ(){
  q.textContent=`Q${idx+1}. ${survey[idx][0]}`;
  a.innerHTML="";
  survey[idx][1].forEach((t,i)=>{
    const b=document.createElement("button");
    b.textContent=t;
    b.onclick=()=>{
      score[i]++;
      idx++;
      idx<survey.length?showQ():showResult();
    };
    a.appendChild(b);
  });
}

function showResult(){
  surveyDiv.classList.add("hidden");

  const time=(Date.now()-startTime)/1000;
  let type;

  if(time>60) type="ë¶ˆì•ˆí˜•";
  else if(score[0]>=score[1] && score[0]>=score[2]) type="ì§ê°í˜•";
  else if(score[1]>=score[2]) type="ë¶„ì„í˜•";
  else type="íšŒí”¼í˜•";

  const map={
    "ì§ê°í˜•":["ì§ê°í˜•","ğŸ”º","ë¹ ë¥¸ íŒë‹¨ì„ ì‹ ë¢°í•œë‹¤"],
    "ë¶„ì„í˜•":["ë¶„ì„í˜•","ğŸ”·","ê·œì¹™ì„ í•´ì„í•˜ë ¤ í•œë‹¤"],
    "íšŒí”¼í˜•":["íšŒí”¼í˜•","âš«","ì„ íƒì„ ë¯¸ë£¬ë‹¤"],
    "ë¶ˆì•ˆí˜•":["ë¶ˆì•ˆí˜•","ğŸŸ£","ì••ë°•ì— í”ë“¤ë¦°ë‹¤"]
  };

  typeName.textContent=map[type][0];
  char.textContent=map[type][1];
  desc.textContent=map[type][2];

  result.classList.remove("hidden");
}

/* ---------- GAME ---------- */
let round=1, rule=0;

function startGame(){
  result.classList.add("hidden");
  game.classList.remove("hidden");
  next();
}

function changeRule(){
  rule=Math.floor(Math.random()*3);
}

function next(){
  if(round%5===1) changeRule();
  roundEl.textContent=round;
  choices.innerHTML="";
  const nums=[r(),r(),r()];
  nums.forEach(n=>{
    const b=document.createElement("button");
    b.textContent=n;
    b.onclick=()=>check(n,nums);
    choices.appendChild(b);
  });
}

function check(n,arr){
  let c;
  if(rule===0) c=Math.max(...arr);
  if(rule===1) c=Math.min(...arr);
  if(rule===2){
    const s=[...arr].sort((a,b)=>a-b);
    c=s[1];
  }
  if(n===c){round++;next();}
  else end();
}

function end(){
  game.classList.add("hidden");
  endDiv.classList.remove("hidden");
  scoreP.textContent=`ë„ë‹¬ ë¼ìš´ë“œ: ${round}`;
}

function r(){return Math.floor(Math.random()*90)+10;}

/* ---------- DOM ---------- */
const start=document.getElementById("start");
const surveyDiv=document.getElementById("survey");
const q=document.getElementById("q");
const a=document.getElementById("a");
const result=document.getElementById("result");
const typeName=document.getElementById("typeName");
const char=document.getElementById("char");
const desc=document.getElementById("desc");
const game=document.getElementById("game");
const choices=document.getElementById("choices");
const roundEl=document.getElementById("round");
const endDiv=document.getElementById("end");
const scoreP=document.getElementById("score");
</script>
</body>
</html>
